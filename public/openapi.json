{
  "openapi": "3.0.2",
  "info": {
    "title": "Beer Shopping API",
    "version": "1.0.1",
    "description": "With this API, developers would be able to retrieve a wide range of information about beer products, such as their name, brand, style, alcohol content, country of origin, price, and availability. This API will also offer additional data, such as customer reviews, ratings, and product images.\n\nUsing this API, developers will be able to create beer-related applications, such as price comparison tools, beer discovery apps, and beer recommendation engines. By leveraging this API, developers can offer their users a more engaging and informative shopping experience, while also making it easier for them to find the perfect beer to fit their tastes and preferences.",
    "license": {
      "name": "Private"
    },
    "contact": {
      "name": "√Ålvaro Larumbe",
      "email": "alvaro@larumbe.es"
    }
  },
  "servers": [
    {
      "url": "",
      "description": "Dev stage"
    }
  ],
  "paths": {
    "/ping": {
      "get": {
        "summary": "Check API state",
        "operationId": "ping",
        "tags": [
          "Ping"
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Ping"
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/UnexpectedError"
          }
        }
      }
    },
    "/ping-auth": {
      "get": {
        "summary": "Check API state",
        "operationId": "ping auth",
        "tags": [
          "Ping"
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Ping"
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/UnexpectedError"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read_monitoring"
            ]
          }
        ]
      }
    },
    "/admin/login": {
      "post": {
        "summary": "Logs an admin into the system",
        "operationId": "adminLogin",
        "tags": [
          "Admin"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "example@example.es"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "Asdf1234"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Users"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/DataNotFoundError"
          },
          "default": {
            "$ref": "#/components/responses/UnexpectedError"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write_monitoring"
            ]
          }
        ]
      }
    },
    "/admin/password": {
      "put": {
        "summary": "Update admin password",
        "operationId": "updateAdminPassword",
        "tags": [
          "Admin"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "name"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "example@example.es"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Users"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/DataNotFoundError"
          },
          "default": {
            "$ref": "#/components/responses/UnexpectedError"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write_monitoring"
            ]
          }
        ]
      }
    },
    "/categories": {
      "get": {
        "summary": "Get categories list",
        "operationId": "getCategories",
        "tags": [
          "Categories"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "default": 1,
              "example": 1
            }
          },
          {
            "name": "results",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10,
              "example": 25
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Category"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/DataNotFoundError"
          },
          "default": {
            "$ref": "#/components/responses/UnexpectedError"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read_monitoring"
            ]
          }
        ]
      },
      "post": {
        "summary": "Add a new category",
        "operationId": "addCategory",
        "tags": [
          "Categories"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Malted"
                  },
                  "description": {
                    "type": "string",
                    "example": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin a dignissim turpis, ac molestie eros."
                  },
                  "subId": {
                    "type": "integer",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "default": {
            "$ref": "#/components/responses/UnexpectedError"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write_monitoring"
            ]
          }
        ]
      }
    },
    "/categories/{catId}": {
      "get": {
        "summary": "Get a single category",
        "operationId": "getCategory",
        "tags": [
          "Categories"
        ],
        "parameters": [
          {
            "name": "catId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/UnexpectedError"
          },
          "default": {
            "$ref": "#/components/responses/UnexpectedError"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read_monitoring"
            ]
          }
        ]
      },
      "put": {
        "summary": "Updates a category",
        "operationId": "updateCategory",
        "tags": [
          "Categories"
        ],
        "parameters": [
          {
            "name": "catId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "example": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/DataNotFoundError"
          },
          "default": {
            "$ref": "#/components/responses/UnexpectedError"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write_monitoring"
            ]
          }
        ]
      },
      "delete": {
        "summary": "Deletes a category",
        "operationId": "deleteCategory",
        "tags": [
          "Categories"
        ],
        "parameters": [
          {
            "name": "catId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/DeleteResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/DataNotFoundError"
          },
          "default": {
            "$ref": "#/components/responses/UnexpectedError"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write_monitoring"
            ]
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "Ping": {
        "type": "array",
        "items": {
          "type": "string",
          "example": "PONG"
        }
      },
      "Users": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "properties": {
            "type": "object",
            "properties": {
              "email": {
                "type": "string",
                "format": "email",
                "example": "example@example.es"
              },
              "password": {
                "type": "string",
                "format": "password",
                "example": "Asdf1234"
              },
              "role": {
                "type": "string",
                "example": "admin"
              }
            }
          },
          "related_entities": {
            "type": "object",
            "properties": {
            }
          }
        }
      },
      "Category": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "properties": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "example": "Charles V"
              },
              "description": {
                "type": "string",
                "example": "Brewed beers are the best ones"
              },
              "idCat": {
                "type": "integer",
                "format": "int32",
                "nullable": true,
                "example": null
              }
            }
          },
          "related_entities": {
            "type": "object",
            "properties": {}
          }
        }
      }
    },
    "responses": {
      "BadRequestError": {
        "description": "Invalid parameters",
        "headers": {
          "Error-Debug": {
            "description": "Error message",
            "schema": {
              "type": "string"
            }
          }
        }
      },
      "DataNotFoundError": {
        "description": "Data not found",
        "headers": {
          "Error-Debug": {
            "description": "Error message",
            "schema": {
              "type": "string"
            }
          }
        }
      },
      "UnauthorizedError": {
        "description": "Authentication information is missing or invalid",
        "headers": {
          "Error-Debug": {
            "description": "Error message",
            "schema": {
              "type": "string"
            }
          }
        }
      },
      "UnexpectedError": {
        "description": "Unexpected error",
        "headers": {
          "Error-Debug": {
            "description": "Error message",
            "schema": {
              "type": "string"
            }
          }
        }
      },
      "DeleteResponse": {
        "description": "Successful operation",
        "headers": {
          "X-Request-Id": {
            "description": "Async request info",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        }
      }
    },
    "securitySchemes": {
      "OAuth2": {
        "type": "oauth2",
        "flows": {
          "password": {
            "tokenUrl": "https://example.com/oauth/token",
            "scopes": {
              "read_monitoring": "Grants read access",
              "write_monitoring": "Grants write access"
            }
          }
        }
      }
    }
  }
}
